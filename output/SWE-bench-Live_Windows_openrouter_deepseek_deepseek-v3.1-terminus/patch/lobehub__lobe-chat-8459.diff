diff --git a/src/server/services/file/impls/local.ts b/src/server/services/file/impls/local.ts
index a0add6425..bb038243b 100644
--- a/src/server/services/file/impls/local.ts
+++ b/src/server/services/file/impls/local.ts
@@ -169,38 +169,84 @@ export class DesktopLocalFileImpl implements FileServiceImpl {
    */
   async uploadMedia(key: string, buffer: Buffer): Promise<{ key: string }> {
     try {
+      // Θ¬îΦ»üΦ╖»σ╛äµá╝σ╝Å
+      if (!key || key.trim() === '') {
+        throw new Error('Invalid file path: path is empty');
+      }
+      
+      // µáçσçåσîûΦ╖»σ╛äµá╝σ╝Å∩╝Üτº╗ΘÖñσ╝Çσñ┤τÜäµû£µ¥áσ╣╢τí«Σ┐¥µá╝σ╝Åµ¡úτí«
+      const normalizedKey = key.replace(/^\/+/, '').replace(/[/\\]+/g, '/');
+      console.log('[DesktopLocalFileImpl] Starting media upload, normalized key:', normalizedKey);
+
       // σ░å Buffer Φ╜¼µìóΣ╕║ Base64 σ¡ùτ¼ªΣ╕▓
       const content = buffer.toString('base64');
 
       // Σ╗Ä key Σ╕¡µÅÉσÅûµûçΣ╗╢σÉì
-      const filename = path.basename(key);
+      const filename = path.basename(normalizedKey);
 
       // Φ«íτ«ùµûçΣ╗╢τÜä SHA256 hash
       const hash = sha256(buffer);
 
-      // µá╣µì«µûçΣ╗╢URLµÄ¿µû¡ MIME τ▒╗σ₧ï
-      const type = inferContentTypeFromImageUrl(key)!;
+      // µá╣µì«µûçΣ╗╢σÉÄτ╝ÇµÄ¿µû¡ MIME τ▒╗σ₧ï∩╝îΣ╜┐τö¿µ¢┤σÅ»Θ¥áτÜäµû╣µ│ò
+      const extension = path.extname(normalizedKey).toLowerCase().slice(1);
+      let type = 'application/octet-stream';
+      
+      // µá╣µì«µûçΣ╗╢µë⌐σ▒òσÉìΦ«╛τ╜« MIME τ▒╗σ₧ï
+      const mimeMap: Record<string, string> = {
+        'png': 'image/png',
+        'jpg': 'image/jpeg', 
+        'jpeg': 'image/jpeg',
+        'gif': 'image/gif',
+        'webp': 'image/webp',
+        'svg': 'image/svg+xml',
+        'bmp': 'image/bmp',
+      };
+      
+      type = mimeMap[extension] || 'image/png'; // Θ╗ÿΦ«ñΣ╜┐τö¿ png
 
       // µ₧äΘÇáΣ╕èΣ╝áσÅéµò░
       const uploadParams = {
         content,
         filename,
         hash,
-        path: key,
+        path: normalizedKey,
         type,
       };
 
-      // Φ░âτö¿ electronIpcClient Σ╕èΣ╝áµûçΣ╗╢
-      const result = await electronIpcClient.createFile(uploadParams);
+      console.log('[DesktopLocalFileImpl] IPC call parameters:', {
+        filename: uploadParams.filename,
+        path: uploadParams.path,
+        type: uploadParams.type,
+        contentLength: uploadParams.content.length
+      });
+
+      // Φ░âτö¿ electronIpcClient Σ╕èΣ╝áµûçΣ╗╢∩╝îµ╖╗σèáΦ╢àµù╢σñäτÉå
+      const result = await Promise.race([
+        electronIpcClient.createFile(uploadParams),
+        new Promise<never>((_, reject) => 
+          setTimeout(() => reject(new Error('IPC request timeout after 30s')), 30000)
+        )
+      ]);
 
       if (!result.success) {
-        throw new Error('Failed to upload file via Electron IPC');
+        throw new Error(`IPC createFile failed: ${JSON.stringify(result)}`);
       }
 
-      console.log('[DesktopLocalFileImpl] File uploaded successfully:', result.metadata);
+      console.log('[DesktopLocalFileImpl] File uploaded successfully:', result.metadata.path);
       return { key: result.metadata.path };
     } catch (error) {
       console.error('[DesktopLocalFileImpl] Failed to upload media file:', error);
+      
+      // σªéµ₧£µÿ» IPC Φ┐₧µÄÑτ¢╕σà│τÜäΘöÖΦ»»∩╝îµÅÉΣ╛¢µ¢┤µ╕àµÖ░τÜäΘöÖΦ»»Σ┐íµü»
+      if (error instanceof Error) {
+        if (error.message.includes('timeout') || error.message.includes('Failed to upload file')) {
+          throw new Error(`Image upload failed: Unable to connect to desktop client. Please check if the application is running properly. Original error: ${error.message}`);
+        }
+        if (error.message.includes('convert_request_failed')) {
+          throw new Error(`Image upload failed: Server conversion request failed. Please check your network connection.`);
+        }
+      }
+      
       throw error;
     }
   }
